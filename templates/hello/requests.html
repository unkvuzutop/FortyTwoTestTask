{% extends 'hello/base.html' %}
{% load staticfiles %}
{% block title %} {{ latest_requests_count}} {% endblock title %}
{% block extra_head %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="{% static 'hello/js/jquery.cookie.js' %}"></script>
{% endblock extra_head %}

{% block content %}
    <div class="row">
        <div class="col-md-12">
            <table class="table table-bordered text-center" id="requests-table" data-last-id="{{ last_request.id }}">
                <thead>
                <tr>
                    <td class="col-lg-2">Type</td>
                    <td class="col-lg-2">Query</td>
                    <td class="col-lg-2">Date</td>
                    <td class="col-lg-2">IP</td>
                    <td class="col-lg-2">Host requested</td>
                </tr>
                </thead>
                <tbody>
                    {% for request in latest_requests %}
                        <tr class="request {% if request.is_viewed %}readed{% else %} unreaded{% endif %}"  id="request_{{ request.id }}" data-id="{{ request.id }}" >
                            <td>
                                {{ request.method }}
                            </td>
                            <td>
                                {{ request.path }}
                            </td>
                            <td>
                                {{ request.date|date:'Y-m-d h:m:s' }}
                            </td>
                            <td>
                                {{ request.ip }}
                            </td>
                            <td>
                                {{ request.host }}
                            </td>
                        </tr>
                    {% empty %}
                        <tr>No requests yet</tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <script src="{% static 'hello/js/request.js' %}"></script>
{% endblock content %}

